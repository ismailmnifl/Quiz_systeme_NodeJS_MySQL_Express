#! /usr/bin/env node

/* Arguments that can be passed are
 * --secret <secretKey>  | -s <secretKey>
 * --out <file-path> | -o <file-path>
 * --algo <algoName> |  -a <algoName>
 * --algo <algoName> |  -a <algoName>
 * --decrypt | -d
 */
"use strict";

var argv = require('minimist')(process.argv.slice(2));

var log = require('./utils/log');

var outputFile = argv.outputFile || argv.o;
var inputFile = argv._[0];
var secret = argv.secret || argv.s;
var encryptionAlgo = argv.algo || argv.a;

var cryptography = require('./cryptography');

if (argv.decrypt || argv.d) log(cryptography.decrypt({
  secret: secret,
  outputFile: outputFile,
  encryptionAlgo: encryptionAlgo
}), 'info');else cryptography.encrypt({
  secret: secret,
  inputFile: inputFile,
  outputFile: outputFile,
  encryptionAlgo: encryptionAlgo
});